# 要件定義(Requirement Definition)

- [要件定義(Requirement Definition)](#要件定義requirement-definition)
  - [はじめに](#はじめに)
  - [システムについて](#システムについて)
  - [ノードについて](#ノードについて)
  - [ツリー](#ツリー)
  - [ページノード](#ページノード)
  - [ノードフォーマット](#ノードフォーマット)
  - [参照可能ノード](#参照可能ノード)

## はじめに

- Phase1での機能要件について記載する
- Phase2以降については(やりたい気持ちはあるが、やるかやらないかもう含め今後検討する)

## システムについて

- FE
  - レスポンシブデザイン
  - エンドユーザが利用するSPAのクライアントアプリ
  - 参照可能ノードを参照できる
  - ページ送りできる
    - スワイプすることで参照可能ノードを参照できる
    - 参照可能ノードの表示順はノードが保持する優先順に依存する
    - シームレスにページ送りができるようにする。
    - 末尾までページが送られたら先頭に戻る
    - 参照可能ノードを跨いだページ送りも可能とする（ex: 経歴→プロフィール)
  - パス指定参照
    - パス入力部より指定されたパスの参照可能ノードを取得する
    - 不正パスが設定された場合、不正パスである旨のメッセージを表示する
    - パス指定後スワイプしたら、ページ送りと同等の機能が実現できる
  - 閲覧の縛りは設けない(Phase2以降は権限による閲覧の縛りも考慮)
  - viライクモードを用意し、有効時はviライクな操作ができるようにする(Phase2にするかも)
- CMS
  - 認証、認可機能を有する
  - 管理者認証をパスしたユーザのみがCMS利用可能
  - ページノード単位でデータ管理する
  - CMSで管理(登録、更新、削除)するページノードはPhase1ではキャリアシートとプロフィールのみ
  - ノード管理画面
    - 一覧画面
      - ページノード新規登録ボタンを表示する(一覧コンポーネントとは別で)
      - ノード一覧を表示する
        - ページノード単位でまとめて子ノードを表示する
        - 子ノードの表示順序は項目チェックyamlの定義順序とする(TODO：Phase2でもよい)
        - ノード行
          - 詳細、編集、削除ボタンを表示する
          - 削除ボタン押下時に削除確認ダイアログを表示する
          - yaml定義で子要素登録可能なノードのみ登録ボタンを表示する
    - 詳細画面
      - 当該ノードの詳細を表示する
      - BLOBデータの場合、DL可能とする(TODO:Phase2からで検討)
    - 登録画面
      - 任意ノードフォーマットに紐づく新規ノードを追加する
      - 登録ボタン押下時に登録確認ダイアログを表示する
      - 登録ボタン押下するとBEに登録リクエストする
      - BLOBフラグ = ONとなるノードの場合、UPコンポーネントを表示する(TODO:Phase2からで検討)
    - 編集画面
      - 任意ノードの詳細情報を表示する
      - 更新ボタン押下時に更新確認ダイアログを表示する
      - 更新ボタン押下するとBEに編集リクエストする
      - BLOBフラグ = ONとなるノードの場合、UPコンポーネントを表示する(TODO:Phase2からで検討)
    - 削除確認画面
      - 削除ボタン押下するとBEに削除リクエストする
      - BLOBフラグ = ONとなるノードの場合、BLOBデータも削除する(TODO:削除しようの整理要)
- BE
  - FEに対してAPIを提供する
  - CMSに対してAPIを提供する

## ノードについて

- システムが扱うデータの最小単位
- システムで一意となるノードIDでノードを識別する
- キーと値のペアを保持することができる
- 値の型は文字列かBLOBを指定することが可能
- 単一の親ノードを持つ
- ゼロないし1以上の子ノードを持つ

## ツリー

- 複数ノードで構成されている
- ノードの親子関係を表現している

## ページノード

- ノードフォーマットと関連づいているノードのこと
- 2階層目にあるノードのこと(システム的にルートに直接紐づくノードとなる想定)

## ノードフォーマット

- ページノードのフォーマットを定義する
- Phase1では下記フォーマットのみを利用可能とする
  - キャリアシート
    - 職務経歴書を参照
  - プロフィール
    - プロフィールを参照
- ノードフォーマットの妥当性チェックをパスしたページノードのみが参照可能ノードとなる
  
## 参照可能ノード

- 参照可能ノードなページノードのこと
- FEは参照可能ノードを参照する、その子要素であっても直接参照はできない
- ノードフォーマットの妥当性チェックをパスしたノードのみ参照可能ノードとなる.満たされない場合はFEからの参照不可となる
- ページノード以外のノードは、上位ノードが参照可能ノードである場合のみFEから参照可能となる。(参照可能なページノードを介して子(孫以下含む)ノードを参照する)
- 項目とチェック内容
  - キャリアシート  
    | 項目 | チェック内容 | 多重度 |
    | --- | --- | --- |
    | 業種 | 必須  | 1 |
    | プロジェクト概要 | 必須 | 1 |
    | 担当業務詳細 | 必須 | 1 |
    | 期間(開始) | 必須、形式(YYYY/MM/DD) | 1 |
    | 期間(終了) | 任意、形式(YYYY/MM/DD)  | 0..1 |
    | 役割 | 任意 | 1..N |
    | 工程 | 任意 | 1..N |
    | 規模 | 任意 | 1 |
    | OS/DB/言語/ツール/機器/インフラ/その他 | 任意 | 0..N |
  - プロフィール
    | 項目 | チェック内容 | 多重度 |
    | --- | --- | --- |
    | mdファイル | 必須、ファイル形式でDB保存 | 1 |
